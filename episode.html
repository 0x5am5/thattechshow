---
---

<!DOCTYPE html>
<html lang="en">
  <head>
    {% include head.html %}
  </head>
  <body style="padding-top: 0; margin: 0">
    {% include header.html %}
    <main
      class="main p-3 mb-2 bg-dark text-white"
      style="padding-left: 15px; padding-right: 15px"
    >
      <div class="hero-wrapper">
        <section class="hero">
          <img
            src="https://res.cloudinary.com/pippa/image/fetch/h_500,w_500,f_auto/https://assets.pippa.io/shows/6012fcea40e3fd5f183effd9/1611911073277-0e9f091bb9a645d5fc792e9301ed9f6b.jpeg"
            style="
              width: 300px;
              border-radius: 10px;
              box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
              margin-right: 1em;
            "
            id="image"
          />
          <div>
            <h1 class="hero-text" id="title">That Tech Show</h1>
            <div id="description">
              The podcast that takes a deeper look into all things tech with
              those who make it happen. Weekly we talk about the latest
              developments in technology around the world, and we have a
              fantastic guest talking about the part they play in the tech
              industry and how it&apos;s shaped their lives.
            </div>
            <ul class="list-reset podcast-list">
              <li class="list-item">
                <a
                  href="spotify:show:1Qcv0qPRsA7FjB2yjMqjGd"
                  target="_blank"
                  rel="noreferrer nofollow"
                  title="Listen on Spotify"
                  class="hero-link"
                >
                </a>
              </li>
              <li class="list-item">
                <a
                  name="anchor"
                  target="_blank"
                  rel="noreferrer nofollow"
                  class="hero-link"
                  href="https://www.stitcher.com/show/that-tech-show"
                ></a>
              </li>
              <li class="list-item">
                <a
                  href="https://itunes.apple.com/us/podcast/id1551868741?mt=2"
                  target="_blank"
                  rel="noreferrer nofollow"
                  title="Listen on Apple Podcast"
                  class="hero-link"
                >
                </a>
              </li>
            </ul>
          </div>
        </section>
      </div>
      <section class="episodes"></section>
    </main>
    <iframe
      id="iframe"
      src="https://player.acast.com/that-tech-show/episodes/that-tech-show-the-trailer"
      style="
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        border-width: 0;
        transition: transform, 0.3s;
        transform: translateY(100%);
      "
    ></iframe>
    <script>
      let episodeUrl = window.location.search
        .split('&')
        .filter((url) => url.match(/episode/));
      if (!episodeUrl.length) {
        window.location = window.location.origin;
      }
      episodeUrl = episodeUrl[0].split('=')[1];

      fetch(window.RSS_URL)
        .then((response) => response.text())
        .then((str) => new window.DOMParser().parseFromString(str, 'text/xml'))
        .then((data) => {
          console.log(data);
          const items = data.querySelectorAll('item');
          let episodeData = null;
          const html = Array.from(items).forEach((episode) => {
            if (episode.querySelector('guid').innerHTML === episodeUrl) {
              episodeData = {
                title: episode.querySelector('title').innerHTML,
                description: episode
                  .querySelector('description')
                  .innerHTML.replace('<![CDATA[', '')
                  .replace(']]>', '')
                  .replace(/Website: .+/, ''),
                image: episode.querySelector('[href]').getAttribute('href'),
              };
            }
          });
          const latestEpisode = Array.from(items)[0]
            .querySelector('link')
            .innerHTML.replace(
              'https://shows.acast.com',
              'https://player.acast.com'
            );
          document.getElementById('image').src = episodeData.image;
          document.getElementById('iframe').src = latestEpisode;
          document.getElementById('iframe').style.transform = 'translateY(0)';
          document.getElementById('title').innerText = episodeData.title
            .replace('<![CDATA[', '')
            .replace(']]>', '');
          document.getElementById('description').innerHTML =
            episodeData.description.replace(']]>', '');
          //document.getElementById('description').innerHTML = document.querySelector('#description p').innerText;
          document
            .querySelector('meta[property="og:image"]')
            .setAttribute('content', episodeData.image);
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"></script>
  </body>
</html>
