<!DOCTYPE html>
<html lang="en" style="font-family: 'Roboto', sans-serif; font-size: 16px; background: #333; color: #FFF;">
    <head>
        <link href="favicon.jpeg" rel="icon" type="image/jpg"/>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>THAT TECH SHOW - Hosted by Chris Addams & Sam Gregory</title>
        <link href="css/style.css" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-TEM8PPB2T0"></script>
        <script>
	if (window.location.href.match(/thattech/)) {
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-TEM8PPB2T0');
	}
</script>
        <script>
	window.RSS_URL = 'https://s8hdp1sdz5.execute-api.eu-west-2.amazonaws.com/latest/proxy/'
</script>
        <meta content="image" property="og:image">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css">
    </head>
    <body style="padding-top: 0; margin: 0;">
        <header class="header-wrap" data-pgc="tts.header">
            <a class="header-title" href="/">That Tech Show</a>
            <a href="https://www.patreon.com/thattechshow" target="_blank" rel="noreferrer nofollow" class="button-link patreon-link"> <svg style="vertical-align: middle;" viewBox="0 0 512 512" width="15" height="15">
                    <path fill="white" d="M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z"></path>
                </svg>
                    Buy us a coffee! </a>
        </header>
        <main class="main">
            <div class="hero-wrapper">
                <section class="hero">
                    <img src="https://res.cloudinary.com/pippa/image/fetch/h_500,w_500,f_auto/https://assets.pippa.io/shows/6012fcea40e3fd5f183effd9/1611911073277-0e9f091bb9a645d5fc792e9301ed9f6b.jpeg" style="width: 300px; border-radius: 10px; box-shadow: 0 0 30px rgba(0, 0, 0, 0.4); margin-right: 1em;" id="image"/>
                    <div>
                        <h1 class="hero-text" id="title">That Tech Show</h1>
                        <div id="description">The podcast that takes a deeper look into all things tech with those who make it happen. Weekly we talk about the latest developments in technology around the world, and we have a fantastic guest talking about the part they play in the tech industry and how it&apos;s shaped their lives.</div>
                        <ul class="list-reset podcast-list">
                            <li class="list-item">
                                <a href="spotify:show:1Qcv0qPRsA7FjB2yjMqjGd" target="_blank" rel="noreferrer nofollow" title="Listen on Spotify" class="hero-link"> </a>
                            </li>
                            <li class="list-item">
                                <a name="anchor" target="_blank" rel="noreferrer nofollow" class="hero-link" href="https://www.stitcher.com/show/that-tech-show"></a>
                            </li>
                            <li class="list-item">
                                <a href="https://itunes.apple.com/us/podcast/id1551868741?mt=2" target="_blank" rel="noreferrer nofollow" title="Listen on Apple Podcast" class="hero-link"> </a>
                            </li>
                        </ul>
                    </div>
                </section>
            </div>
            <section class="episodes">
</section>
        </main>
        <iframe id="iframe" src="https://player.acast.com/that-tech-show/episodes/that-tech-show-the-trailer" style="position: fixed; bottom: 0; left: 0; right: 0; width: 100%; border-width: 0; transition: transform,.3s; transform: translateY(100%);"></iframe>
        <script>
	let episodeUrl = window.location.search.split('&').filter(url => url.match(/episode/));
	if (!episodeUrl.length) {
		window.location = window.location.origin
	}
	episodeUrl = episodeUrl[0].split('=')[1];
	
     fetch(window.RSS_URL)
		 	.then(response => response.text())
		 	.then(str => new window.DOMParser().parseFromString(str, "text/xml"))
		 	.then(data => {
		 
		 console.log(data);
			 const items = data.querySelectorAll('item');
		 	let episodeData = null;
			 const html = Array.from(items).forEach(episode => {
				 if (episode.querySelector('guid').innerHTML === episodeUrl) {
					 episodeData = {
						 title: episode.querySelector('title').innerHTML,
						 description:  episode.querySelector('description').innerHTML.replace('<![CDATA[', '').replace(']]>','').replace(/Website: .+/, ''),
						 image: episode.querySelector('[href]').getAttribute('href')
					 }
				 }
			 });
		 		 const latestEpisode = Array.from(items)[0].querySelector('link').innerHTML.replace('https://shows.acast.com', 'https://player.acast.com');
		 			 document.getElementById('image').src = episodeData.image;
		 		 	document.getElementById('iframe').src = latestEpisode;
		 document.getElementById('iframe').style.transform = 'translateY(0)';
			 document.getElementById('title').innerText = episodeData.title.replace('<![CDATA[', '').replace(']]>','');
		 			 document.getElementById('description').innerHTML = episodeData.description.replace(']]>', '');
			 //document.getElementById('description').innerHTML = document.querySelector('#description p').innerText;
		 document.querySelector('meta[property="og:image"]').setAttribute('content', episodeData.image)
			
     })
	
	
 </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"></script>
    </body>
</html>
